+: {Type: Folder}

.NonClassTypes:
  Summary: 
    - This article contains the non-class types included in the system, on top of the simple ones (integer, char, string, float, bool, etc.)
  Type: Article      
  Content:      
    Simple types:
      # - char:
      #     Summary: a single character; 16 bit.
      #     SupportedFrom:
      #       MVP++
      - string:
          Summary: a string of chars (like this text)
      - $@TODO rest of the simple types @$
    Complex types:
    - IdString: 
        Summary:
          - a string, but can contain only numbers, English alphabet characters, the dash and the underscore character
          - it can't be equal to the "reserved words", which are at the moment:
            - new
            - class
            - enum
            - namespace
            - string
            - integer            
            - float
            - bool
            - boolean
            - duration
            - datetime
            - using            
    # - Map<,>: 
    #     Summary: 
    #       Details:
    #         - a Mapping of the first type into the second type. 
    #         - BNF: |
    #             "Map<" <TypeId1> "," <TypeId2> ">"
    #       Example: |
    #         class MyClass:
    #           Map<IdString, string> Dictionary:
            
    #         ...

    #         <MyClass>:
    #           Dictionary:
    #             myId: description for it
    #             mySecondId: lorem ipsum dolor sit
    - F2Link:
        Summary: 
          See the F2Links specification in the specifications
    - Duration: a length of time, written as a number and a time unit suffix, such as "10m" is 10 minutes, "1h" is 1 hour, etc. Time suffixes can be s, m, h, d, w, M, y/Y (so case matters.)
    - DateTime: 
        Summary:
          - a point in time
          - accepted format currently is the ISO + some we use commonly 
          - in first versions, until automatic conversions are place, any non ISO format we support must follow the Year, Month, Day, hour, minute, seconds order
    - InternalId:
        Summary: a unique identifier identifying the Items; at the time of writing it's a GUID

namespace System.Types:
  class Item:
    Summary:
      The root of all; everything about this is (should be) hardcoded in the software system - so changing this should not affect the behavior. Only derived classes can be instantiated.
    ClassDescriptionFlags: [Abstract]
    Properties:
      User CreatedBy:
      DateTime CreatedAt:
      InternalId InternalId:
      ClassDescription Type:
      Item BelongsTo:
      Entitlement[] Entitlements:
      bool IsDeleted:
        Summary: for soft-deleting an Item. #Note that it is still under consideration whether we need this; 80% we do.
    <--TODO Clean up the flags - so hardcoded, etc. - and add them to the ItemTypes-:

  class Entitlement:
    Summary:
      Pairing the rights with the users - so that it can finally be used on the Items to signal what users have what rights.
    Properties:
      bool IsPropagating:
        Summary: whether the Entitlement is propagating down on the BelongsTo tree - i.e. if Apple BelongsTo Pear and I have rights to Pear, do I have rights to rights to Apple as well
      Right Right:
        Summary: the bit field (flags) of Rights the user can have
      Role Role: 
        Summary: the entitlement of the system
    Comments:
      - Bobi: supported from MVP++ versions

  class Role:
    Inherits: StandardItem
    Summary: Represents a Role - used in permission management
    Properties:
      Role[] Role:
        Summary:
          The Roles this Role represents; note that a single User is also a Role
    Comments:
      - Bobi: supported from MVP++ versions

  class User:
    Inherits: Role
    Summary:
      Represents a User
    Properties:
      string Password:
        Flags: [WriteOnly, DoNotPersist]
      string HashAndSalt:
        Flags: ReadOnly
      Alias[] Aliases:
        Summary:
          The aliases the user has

  class Alias:
    Inherits: StandardItem
    Summary:
      For supporting "full anonymity" - so that you can, if you want, use a different alias for different purposes, making it harder for people to connect your virtual personality with your real-life one

  enum Right:
    IsFlags: true #meaning a property of this type is a bit field, so e.g. in this particular case can have a value of e.g. Read + Write together.
    Members:
      Read:
        Summary: The user having this right can read the properties of the Item
        Value: 1
      Write:
        Summary: The user having this right can write the properties of the Item
        Value: 2
      Create:
        Summary: The user having this right can create new Items under this item (i.e. set the BelongsTo of the newly created Item pointing to this)
        Value: 4
      Move:
        Summary: The user having this right can change the BelongsTo of this Item - i.e. the user can move it under a different Item
        Value: 8
      Execute:    
        Summary: The user having this right can execute the Item; only applies if the Item is a Function.
        Value: 16

  class StandardItem:
    #Inherits: Item //Commented out as this is by default
    ClassDesciptionFlags: [Abstract]
    Properties:
      IdString Id: #Note that the content of this will be automatically generated IF left empty by The F2Tool
        Mandatory: true
      string Summary: 
      string Notes:
        Summary:
          any notes from anyone (regarding the Task, how to do it, etc.; please note that the "Workspace" property is to be used for scribblings while doing the task). Please mention your username in it if you're not the owner of the task
      Comment[] Comments:
        Summary:
          - a "chat" thread - up until we have some chat functionality.
          - about the format: the notes on the Comment type
      IdString[] Tags:
        Summary: a set of one-word tags - e.g. we use "CSVTODO" currently, signaling it should be added to the CSV file.      
    Notes: 
      The content of the Id field will be automatically generated from the content of the Summary field by removing spaces and capitalizing the letter after (Pascal case), removing non-allowed chars, and using the first 12 + last 12 chars IF left empty; if not unique, adding numbers to the end (and using less characters from the last part). E.g. the summary "Add the Extract F2Yaml link functionality" would be "AddTheExtrac_unctionality"

  class ClassDescription:
    Inherits: StandardItem
    Summary:
      Item for the description of other Items - i.e. like a "class" for describing "objects" in Object Oriented programming languages.  
    Properties: 
      PropertyDescription[] Properties:
      ClassDescriptionFlags ClassDescriptionFlags:
        PropertyDescriptionFlags
      -Result->TODO write this - based on the current F2Tool implementation:
    Comments:
      - [Bobi, 20251208, "Up until I write this, use the fields you see in class descriptions like this (so anything which is 'class SomeId:')"]

  class PropertyDescription:
    Inherits: StandardItem
    Summary:
      Item for the description of the Properties of other Items
    Properties: -Result->TODO write this - based on the current F2Tool implementation
    Comments:
      - [Bobi, 20251208, "Up until I write this, use the fields you see in property descriptions in this file (so anything which is under the 'Properties:' part of class descriptions"]

  class Enumeration:
    Inherits: StandardItem
    Summary:
      Item for the description of an enumeration.
    Notes: 
    Properties: -Result->TODO write this - based on the current F2Tool implementation-
    Comments:
      - [Bobi, 20251208, "Up until I write this, use the fields you see in enumeration definintions (so anything which is 'enum SomeId:')"]
  
  class NameSpace:
    Inherits: StandardItem
    Summary:
      Serves as a grouping of class descriptions - similarly as in e.g. C#.
      Purpose is not much different than a simple folder/directory.
      At the moment there are no extra properties (on top of the ones defined in Item)

namespace Barba.Types:
  Summary:
    - The Items we use for "business" purposes - e.g. Task, Requirement, etc.
  Comments:
    - [Bobi, 20251208, "The name 'Barba' signals that it should be renamed but I have no good idea. 'Barba' is coming from to the children cartoon 'BarbaPapa' where things were called BarbaSomething"]

  class Folder:
    Inherits: StandardItem
    Properties:
      ItemType[] DefaultTypes:
        Summary: Only these types are allowed in the $@Items@$ collection
      Item[] Items:
        Flags: [IsDefault]

  class Task:
    Inherits: StandardItem
    Properties:
      TaskStatusEnum Status:
          Mandatory: true
      string Details:
      #- string <-Workspace-:
      string Estimation:
        Summary: 
          - the estimated time needed to complete the task, optionally the scenario description as well (so estimated when, by whom, for what case)          
      Duration RemTime:
        Summary:
          - the remaining time needed to complete the task, set by the one working on it
      string Result:
        Summary: the result of the task, e.g. if it's a question, then the answer.
      WorkLog[] WorkLog:
        Summary: 
        - a list of WorkLog entries; it is expected that the usual way of adding this entry is in a flow sequence of the values
        - Example:
            MyItem:
              WorkLog:
                - [bobi, 10m, "writing the above", 20250115T2015]
                - [bobi, 1m, "writing this line"]
      Task[] DependsOn:
        Summary: This task depends on another task, meaning this can't be finished (or even started) until the other is done
      Task[] DependendOnThis:
        Summary: The other tasks which depend on this task, meaning those can't be finished (or even started) until this is done
      Task[] Milestone:
        Summary: The milestone(s) it belongs to
      DateTime ScheduledAt:
        Summary: If a task is scheduled to be done at a certain date/time, the datetime.
        Notes: 
          - The task should be in the "Scheduled" state.
      Requirement ForRequirement:
        Summary: The Requirement for which this Task is needed      
      Task[] SubTasks:
        Flags: [IsDefault]
        #"IsDefault" flag means that this is the default list the system would populate with Items specified with the "." notation, e.g. if there is a Task: 
        #
        #MyTask:
        #  SubTasks:
        #    Apple:
        #
        #Then it can be written this way:
        #
        #MyTask:
        #  .Apple:
        #
        #because the system would treat "Apple" as an element of the default array (SubTasks)      
      User Responsible:
        Summary:
          the user who is responsible for performing the task
      User[] By:
        Summary:
          a list of users who can perform/contribute to the task
      TaskStatusEnum[] PreviousStatuses:
        Summary:
          a list of Statuses, containing the Status history of this Task.
        Notes:
          Temporary. Mostly for being able to know what was the status before a Task became "Blocked".
          Should be removed when the same can be accomplished using event log - for which first we need the event log and a full F2Tool based functionality.
      string Workspace:
        Summary:
          One can put any "work in progress" scribblings, notes, incomplete results here.
        Notes:
          Replacing the <-Workspace- "extension property" as at the moment these types of properties will be supported in much later phases only (if at all)
          
  class WorkLog:
    Properties:
      - User Performer:
          Mandatory: true
      - Duration Spent:
          Mandatory: true
      - string ActivityDescription:
      - DateTime Start:
    Notes:
      - It is expected that the usual format of entering this data is the values in a sequence format: 
          That is: [username, spentTime, optionalActivityDescription, optionalStartTime]
          Example: [bobi, 10m, "writing this", 20250115 T 2015]

  enum TaskStatusEnum:
    Members:
      DraftTODO:
          Summary: the initial status.
      TODO:
          Summary: when the task description is done (i.e. it's written down what needs to be done so that the one doing it would understand without needing to ask questions)
      EstTODO:
          Summary: 
            - it's estimated how long it would take to finish the task
            - in larger tasks you should only start working on a task (ideally...) after it reached this status
      InProgress:
          Summary: the task is 
      Done:
      CurrentFocus:
        Summary:
          There should be only 1 CurrentFocus "tree"; it's highlighted (if using CustomColoring) on the right hand side bar          
      Blocked:
        Summary:
          The Task is blocked by another Task
        Notes: If a Task is set to this status then there should be a "DependsOn:" property added as well, signaling what other task or circumstance is blocking the one in this status.
      NEXT:
        Summary:
          The Task should be performed only after all the previous Tasks are done (in the parent Task)
      Scheduled:
        Summary: the Task is scheduled to be performed at a certain time
        Notes: If a Task is set to this status, then there should be a "ScheduledAt:" property set for the task
      OnGoing:
        Summary: 
          - The task is going on for a long time, on-off. 
          - Example: a Task for preparing for the standup, which happens every day, with the same steps, so instead of creating a new Task for each, you create one in this status and log the hours to it every day.
      OnHold:
          Summary: No work should be done on the task until further notice.
      Cancelled:
          Summary: The task should not be done at all.
      Paused:
          Summary: The task is paused due to needing to concentrate on other Tasks
      Closed:
          Summary: The task is not only done, but the information described in it is not expected to be necessary in the future and therefore can be archived - e.g. it does not have a Result field OR the information there is not necessary for any future tasks 

  class Bug:
    Inherits: Task
    Properties:
      BugStatus Status:
      User QA:
      string Version:
      string Area:
        Summary:
          the functionality group of the app - like "login"
      BugSeverity Severity:
      string ActualResult:
      string ExpectedResult:
      string Steps:      
        Summary:
          what steps the QA performed, what was the result and what is the expectation
      Retest[] Retest:
        User QA:
        string Version:
        string Details:
        string ActualResult:
        string ExpectedResult:
        string Steps:

  enum BugStatus:
    Members:
      New:
      Accepted:
      Rejected:      
      Fixing:
      Fixed:
      Retesting:
      RetestFail:
      RetestSuccess:
      Closed:
      OnHold:
  
  enum BugSeverity:
    Members:
      0-Zero:
      1-VeryLow:
      2-Low:
      3-Average:
      4-High:
      5-VeryHigh:
      6-Extreme:
      7-OMG:

  class TestCase:
    Inherits: StandardItem
    Properties:
      Requirement Requirement:
      string Preconditions:
      string TestSteps:
      string ExpectedResult:

  class Comment:
    #Inherits: Item //Commented out as this is by default
    Properties:
      User By:
      string Content:
    Notes:
      - Use the following formats:        
          key-value pair, if the timestamp is not important: 
            That is: 
              - username: content
            Example: 
              - bobi: lorem ipsum
          flow-list, if the timestamp is important:
            That is:
              - [username, date, "content"]
            Example:
              - [bobi, 20251208T0008, "lorem ipsum"]

  class Requirement:
    Inherits: StandardItem
    Properties:
      string Details:
      Requirement[] Parts:
        IsDefault: true
      Requirement[] RequiresRequirement:
      RequirementStatusEnum Status:
      integer CurrentValue:
      Area ForArea:
    ##Methods:
    ##- void DoSomething(): =>SomeFunction()
    Notes:
      Equivalent to (at the time of writing the below):
        ItemType:
          Type: ClassDescription
          Id: Requirement
          Properties:
          - new: 
              Id: Details
              Type: string              
          - new:
              Id: Parts
              IsList: True
              Type: Requirement                
          - new:
              Id: RequiresRequirement
              IsList: True
              Type: Requirement
          - new:
              Id: Status
              Type: RequirementStatusEnum
          - new:
              Id: CurrentValue
              Type: integer  

  class Milestone:
    Inherits: Requirement    

  enum RequirementType:
    Members:
      Requirement:
        IsDefault: true
      MileStone:

  enum RequirementStatusEnum:
    Members:
      New: 
          Summary: Initial Status
          IsDefault: true
      Drafting:
          Summary: In process of creating first draft
      Draft:
          Summary: First Draft
      Reviewed:
          Summary: After a review
      ReadyForDev:
          Summary: Value estimated
      Developing:
          Summary: When development starts
      ReadyForQA:
          Summary: When development is done
      InQA:
          Summary: Under testing
      BugFixing:
          Summary: There are bugs AND they are being fixed
      QAPassed:
          Summary: QA passed
      Closed:
          Summary: Everything is done around the feature.
    Comments:
      Bobi: >
        Equivalent to (at least at the time of writing):
          new Enumeration:
            Id: RequirementStatusEnum
            Members:
            - new: 
                Id: New
                Summary: Initial Status
                IsDefault: true
            - new:
                Id: Drafting
                Summary: In process of creating first draft
            - new:
                Id: Draft
                Summary: First Draft
            - new:
                Id: Reviewed
                Summary: After a review
            - new:
                Id: ReadyForDev
                Summary: Value estimated
            - new:
                Id: Developing
                Summary: When development starts
            - new:
                Id: ReadyForQA
                Summary: When development is done
            - new:
                Id: InQA
                Summary: Under testing
            - new:
                Id: BugFixing
                Summary:                 
            - new:
                Id: QAPassed
                Summary: QA passed
            - new:
                Id: Closed
                Summary: Everything is done around the feature.
    
  class Area:
    Summary: Describes an Area in which the project needs to progress - such as F2Tool capability level, number of members or resources, process development level
    Inherits: StandardItem
    Properties:
      string Details:
      Area[] SubAreas:
        IsDefault: true
      Milestone[] Milestones:

  class UseCase:
    Inherits: StandardItem
    Properties:
      UseCaseStatusEnum Status:
        Summary: Signaling the maturity of the UC
      User[] Actors:
        Summary: The actors performing the actions in the UC
      string Given:
        Summary: The conditions we expect to be true - like user is logged in, has rights, etc.
      string When:
        Summary: At what point/circumstance the UC is triggered
      UCFlows Flows:
        Summary: The "Then" part, or, what should happen in the main and any non-main flows
      UCFlow[] AlternateFlows:
        IsDefault: true

  enum UseCaseStatusEnum:
    Members:
      0-New:
      1-SomeProgress:
      2-HighLevel:
      3-Detailing:
      4-AlmostDone:
      5-Done:
      6-Reviewed:
      7-Mature:
      8-Gandalf:
        Summary:
          this is a magically good state, a UC made by a simple human should not be able to reach this

  class UCFlows:    
    Properties:
      UCFlow Main:
      UCFlow[] Alternate:
        IsDefault: true

  class UCFlow:
    Inherits: StandardItem
    Properties:
      UCStep[] Steps:
        Summary: The steps to be taken by the actor(s)

  class UCStep:
    Inherits: StandardItem
    Summary: The textual description of a step in a flow of an UseCase
    Properties:
      UCStep[] Steps:
        IsDefault: true   

  class StandupReport:
    Inherits: StandardItem
    Properties:
      StandupWasEntry[] Was:
      StandupNextEntry[] Next:      
      string[] AOIB:

  class StandupMeetingMinutes:    
    Inherits: StandardItem
    Properties:
      User ScrumMaster:
      User[] Participants:
      string ScrumMasterQuestions:      
      DateTime NextStandupPlannedAt:
      User NextStandupScrumMaster:

  class Article:
    Inherits: StandardItem
    Properties:
      string Title:
      string Details:
      string Content:
      Article[] Parts:
        IsDefault: true
      ArticleMaturity Maturity:
  
  enum ArticleMaturity:
    Members:
    - 0-New
    - 1-SomeProgress
    - 2-HighLevel
    - 3-Detailing
    - 4-AlmostDone
    - 5-Done
    - 6-Reviewed
    - 7-Mature
    - 8-Gandalf
  
namespace System.Types.Processes:
  Comments:
    Bobi: This is mostly a plan, here only to give some idea about what's planned and how the system would work. Very-very work in progress.

  class ProcessInfo:
    Inherits: Item
    Properties:
      string ProcessName:
      ProcessDescription OriginalProcessDescription: 
      RunMethod RunMethod:
      ProcessWorkspace ProcessWorkspace:
      User StartedBy:
      ProcessStatus Status:
      DateTime StartedAt:
      
  enum RunMethod:    
    Members:
      OSProcess:
        Summary: 
          - for processes which are run as a separate "application", as an operating-system process. 
          - If the app is restarted, the process context (position, variables, etc.) is lost therefore. 
          - Suitable for short lived processes or ones which do not depend on user input. 
      F2Interpreted:
        Summary: 
          - for processes which are run by the ProcessExecutor;
          - If the app is (properly) restarted, the process context is kept
          - Suitable for processes which often wait for user input.        

namespace System.Types.WorkSpaces:
  Comments:
    Bobi: This is mostly a plan, here only to give some idea about what's planned and how the system would work. Very-very work in progress.

  class WorkspaceDescription:
    Inherits: StandarItem
    WorkspaceProperties .Properties :  
    string .RootDirectoryAbsolutePath:
    # WSFolderDescription .FoldersAndFiles:
    WSItemDescription[] .Roots:

  class WorskpaceProperties :
    string .WorkspaceName:
    string .Description:
    string .RootsFolderName: #default: Root
    string .ReportsFolderName: #default: Reports
    string .TF2PFolderName: #default: !TF2P; containing this WorkspaceDescription, Local process contexts

  # class WSFolderDescription:
  #   string .Name:
  #   string .Summary:
  #   WSFolderDescription[] .Folders:
  #   WSEntryDescription[] .Files:

  class WSItemDescription:
    bool .IsFolder: #if so, generated as a folder + a file (if not a Folder), otherwise only as a file.
    bool .IsTop: #if so, the file/folder name will be its FullId
    PropertyDescription .FolderContentProperty: #the Items in this folder (if it is) are referenced by which property, e.g. BelongsTo (default), 
    Item .Item: #the Item it should represent
    WSFileDescription .Content:

  class WSFileDescription:
    WSFilePartDescription[] .Items:

  abstract class WSFilePartDescription:
    Range .RowRange: #what rows - from-to

  class WSFilePartDescription WSFileComment:
    string .CommentText:
    int .StartColumn:

  class WSFilePartDescription WSFileItem: 
    Item .Item:
    RenderingOptions .RenderingOptions:

  class WSConsoleFileDescription:
    string .Name:
    #nothing really; it's just a file

  class WSReportDescription:
    QueryDescription .Query:
    ViewDescription .View:

namespace System.Types.Queries:
  Comments:
    Bobi: This is mostly a plan, here only to give some idea about what's planned and how the system would work. Very-very work in progress.
  class QueryDescription:
    Properties:
      string .Query:     
      <--TODO finish this:

  class ViewDescription:
    <--TODO the properties for describing the view comes here:

namespace System.Types.Yaml.Rendering:
  Comments:
    Bobi: This is mostly a plan, here only to give some idea about what's planned and how the system would work. Very-very work in progress.
  abstract class RenderingOptions:                     

  class FunctionBasedRenderingOptions: 
    Inherits: RenderingOptions
    Properties:
      Func<Item, string> GenerateYamlString:                                    

  class TemplateBasedRenderingOptions: 
    Inherits: RenderingOptions
    Properties:
      string Template:
      
  class OptionsBasedRenderingOptions:  
  Inherits: RenderingOptions
  Properties:
    RenderingOptions BasedOn:
    ItemwideRenderingOptions ItemWide:
    IHeaderRenderingOptions Header:
    IPropertyRenderingOptions[] Properties:

<EOF>: #Write above and do not delete this line please; without this, in VS Code editor if every Item is folded and you want to add something after the last one, you had to unfold the last one, navigate to the end of it, add a line and then go back and fold the (former) last one.  (EOF = End of File)